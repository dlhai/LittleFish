<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>看拼音写汉字</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <script src="jquery-3.3.1.js"></script>
    <script src="pinyin.js"></script>
</head>
<body class="xFCscol">
    <header>
        <a href="javascript:onList()">返回</a><a href="javascript:onNext()">下一步</a>
    </header>
    <div id="list">show list</div>
    <script type="text/javascript">
        request("/duo?id=" + GetUrlParam("id"), "", "", function (res, ctx) {

//  {zi:"", py:"",pl:["","","",""]}
//  [  // 全文，由多个段组成
//      [  // 段，由多个词组成
//          [  // 词，由多个字组成
//              {zi:"", py:"",pl:["","","",""]},
//              {zi:"", py:"",pl:["","","",""]},
//              {zi:"", py:"",pl:["","","",""]},
//            //     [{py:",,", zi:["zi-,,","","",""]},[],[],[],[]],        // 段
//     [[]]
//  ]  
//
            var html="";
            var r = res.rs;
            res.rs.forEach(row=> {
                row.forEach(ci=> {
                    html += '<div class="ci"><div><div>(</div></div>';
                    ci.forEach(zi=> {
                        var selpy = "";
                        if (zi.py != "")
                            selpy = '<div class="selbold">' + zi.py + "</div>";
                        html += '<div class="seldone"><div>' + py.map(x=>"<div>" + x + "</div>").join("") + selpy + "</div><div>" + zi.zi + "</div></div> ";
                    });
                    html += "<div><div>)</div></div></div> ";
                });
            })
            document.getElementById("list").innerHTML = h;
        });
    </script>
</body>
</html>
